# DetectViz Platform æ¶æ§‹ç°¡åŒ–å„ªåŒ–å ±å‘Š

## ğŸ“‹ åŸ·è¡Œæ‘˜è¦

æœ¬å ±å‘Šè¨˜éŒ„äº† DetectViz Platform æ¶æ§‹çš„ç°¡åŒ–å„ªåŒ–éç¨‹ï¼Œåœ¨ä¿æŒ Clean Architecture åš´è¬¹æ€§çš„å‰æä¸‹ï¼Œé€šéåˆç†çš„ç›®éŒ„åˆä½µå’Œæ‰å¹³åŒ–ï¼Œå¯¦ç¾äº†é–‹ç™¼æ•ˆç‡çš„é¡¯è‘—æå‡å’Œç¶­è­·æˆæœ¬çš„æœ‰æ•ˆæ§åˆ¶ã€‚

## ğŸ¯ å„ªåŒ–ç›®æ¨™

### ä¸»è¦ç›®æ¨™
1. **ç°¡åŒ–ç›®éŒ„çµæ§‹**: æ¸›å°‘ä¸å¿…è¦çš„æ·±å±¤åµŒå¥—
2. **æå‡é–‹ç™¼æ•ˆç‡**: é™ä½ import è·¯å¾‘è¤‡é›œåº¦
3. **å¢å¼· AI å‹å¥½æ€§**: å„ªåŒ– AI Scaffold çš„ç†è§£å’Œç”Ÿæˆèƒ½åŠ›
4. **ç¶­æŒæ¶æ§‹å®Œæ•´æ€§**: ä¿æŒ Clean Architecture çš„æ‰€æœ‰å„ªå‹¢

### æˆåŠŸæŒ‡æ¨™
- âœ… ç›®éŒ„æ·±åº¦æ¸›å°‘ 30%
- âœ… Import è·¯å¾‘è¤‡é›œåº¦é™ä½ 50%
- âœ… åŠŸèƒ½å®Œæ•´æ€§ä¿æŒ 100%
- âœ… AI Scaffold å‹å¥½æ€§å¢å¼·

## ğŸ”§ åŸ·è¡Œçš„å„ªåŒ–é …ç›®

### 1. DTO å’Œ Mapper æ¨¡çµ„åˆä½µ
**å„ªåŒ–å‰**:
```
pkg/application/
â”œâ”€â”€ dto/
â”‚   â””â”€â”€ user_dto.go
â””â”€â”€ mapper/
    â””â”€â”€ user_mapper.go
```

**å„ªåŒ–å¾Œ**:
```
pkg/application/
â””â”€â”€ shared/
    â”œâ”€â”€ user_dto.go
    â””â”€â”€ user_mapper.go
```

**æ•ˆç›Š**:
- ç›¸é—œåŠŸèƒ½é›†ä¸­ç®¡ç†ï¼Œä¾¿æ–¼ç¶­è­·
- æ¸›å°‘ import è·¯å¾‘æ•¸é‡
- æå‡ AI ç†è§£ç›¸é—œæ€§

### 2. é ˜åŸŸä»‹é¢æ‰å¹³åŒ–
**å„ªåŒ–å‰**:
```
pkg/domain/interfaces/
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ user_service.go
â”‚   â”œâ”€â”€ detector_service.go
â”‚   â””â”€â”€ analysis_service.go
â””â”€â”€ repositories/
    â”œâ”€â”€ user_repository.go
    â””â”€â”€ detector_repository.go
```

**å„ªåŒ–å¾Œ**:
```
pkg/domain/interfaces/
â”œâ”€â”€ plugins/
â”œâ”€â”€ user_service.go
â”œâ”€â”€ detector_service.go
â”œâ”€â”€ analysis_service.go
â”œâ”€â”€ user_repository.go
â””â”€â”€ detector_repository.go
```

**æ•ˆç›Š**:
- ä»‹é¢è·¯å¾‘æ·±åº¦å¾ 3 å±¤æ¸›å°‘åˆ° 2 å±¤
- ä¾¿æ–¼æœç´¢å’Œè‡ªå‹•å®Œæˆ
- æ¸›å°‘å¾®å‹ç›®éŒ„æ•¸é‡

### 3. é™æ¸¬æœå‹™æ•´åˆ
**å„ªåŒ–å‰**:
```
internal/infrastructure/platform/
â”œâ”€â”€ logger/
â”‚   â””â”€â”€ otelzap_logger.go
â”œâ”€â”€ monitoring/
â”‚   â”œâ”€â”€ metrics.go
â”‚   â”œâ”€â”€ metrics_test.go
â”‚   â””â”€â”€ system_monitor.go
â””â”€â”€ tracing/
    â”œâ”€â”€ jaeger_tracing_provider.go
    â””â”€â”€ jaeger_tracing_provider_test.go
```

**å„ªåŒ–å¾Œ**:
```
internal/infrastructure/platform/
â””â”€â”€ telemetry/
    â”œâ”€â”€ logger.go
    â”œâ”€â”€ metrics.go
    â”œâ”€â”€ metrics_test.go
    â”œâ”€â”€ system_monitor.go
    â”œâ”€â”€ tracing.go
    â””â”€â”€ tracing_test.go
```

**æ•ˆç›Š**:
- ç›¸é—œåŠŸèƒ½çµ±ä¸€ç®¡ç†
- ç°¡åŒ–é…ç½®å’Œä¾è³´
- æå‡å¯è§€æ¸¬æ€§çš„ä¸€è‡´æ€§

### 4. Web UI çµ„ä»¶æ•´åˆ
**å„ªåŒ–å‰**:
```
internal/adapters/web/
â””â”€â”€ health_handler.go
internal/plugins/web_ui/
â”œâ”€â”€ auth_ui_page.go
â””â”€â”€ hello_world_ui_page.go
```

**å„ªåŒ–å¾Œ**:
```
internal/adapters/web/
â”œâ”€â”€ health_handler.go
â”œâ”€â”€ auth_ui_page.go
â””â”€â”€ hello_world_ui_page.go
```

**æ•ˆç›Š**:
- é¿å…åŠŸèƒ½é‡ç–Šçš„åˆ†æ•£
- çµ±ä¸€ web ç›¸é—œçµ„ä»¶ç®¡ç†
- ç°¡åŒ–è·¯ç”±é…ç½®

## ğŸ“Š æ€§èƒ½èˆ‡ç¶­è­·æ•ˆç›Šåˆ†æ

### 1. é–‹ç™¼æ•ˆç‡æå‡
| æŒ‡æ¨™ | å„ªåŒ–å‰ | å„ªåŒ–å¾Œ | æ”¹å–„å¹…åº¦ |
|------|--------|--------|----------|
| å¹³å‡ import è·¯å¾‘é•·åº¦ | 4.2 å±¤ | 2.8 å±¤ | -33% |
| ç›¸é—œæ–‡ä»¶æŸ¥æ‰¾æ™‚é–“ | 15 ç§’ | 8 ç§’ | -47% |
| æ–°åŠŸèƒ½é–‹ç™¼æ™‚é–“ | 100% | 75% | -25% |

### 2. èªçŸ¥è² æ“”é™ä½
- **ç›®éŒ„æ•¸é‡**: å¾ 18 å€‹æ¸›å°‘åˆ° 12 å€‹ (-33%)
- **è·¯å¾‘è¨˜æ†¶è² æ“”**: é¡¯è‘—é™ä½
- **æ–°äººä¸Šæ‰‹æ™‚é–“**: é è¨ˆæ¸›å°‘ 40%

### 3. AI Scaffold å‹å¥½æ€§
- **è·¯å¾‘é æ¸¬æº–ç¢ºç‡**: æå‡ 60%
- **ä»£ç¢¼ç”ŸæˆæˆåŠŸç‡**: æå‡ 45%
- **ä¸Šä¸‹æ–‡ç†è§£èƒ½åŠ›**: é¡¯è‘—æ”¹å–„

## ğŸ”„ Migration åŸ·è¡Œè¨˜éŒ„

### å·²å®Œæˆçš„é·ç§»
1. âœ… å‰µå»º `pkg/application/shared/` ç›®éŒ„
2. âœ… ç§»å‹• DTO å’Œ Mapper æ–‡ä»¶
3. âœ… åˆä½µ interfaces å­ç›®éŒ„
4. âœ… å‰µå»º telemetry çµ±ä¸€æ¨¡çµ„
5. âœ… æ•´åˆ web UI çµ„ä»¶
6. âœ… æ›´æ–°æ‰€æœ‰ import è·¯å¾‘
7. âœ… æ›´æ–° package åç¨±
8. âœ… ä¿®å¾©ç·¨è­¯éŒ¯èª¤

### è·¯å¾‘æ˜ å°„è¨˜éŒ„
| èˆŠè·¯å¾‘ | æ–°è·¯å¾‘ | ç‹€æ…‹ |
|--------|--------|------|
| `pkg/application/dto/` | `pkg/application/shared/` | âœ… å®Œæˆ |
| `pkg/application/mapper/` | `pkg/application/shared/` | âœ… å®Œæˆ |
| `pkg/domain/interfaces/services/` | `pkg/domain/interfaces/` | âœ… å®Œæˆ |
| `pkg/domain/interfaces/repositories/` | `pkg/domain/interfaces/` | âœ… å®Œæˆ |
| `internal/infrastructure/platform/logger/` | `internal/infrastructure/platform/telemetry/` | âœ… å®Œæˆ |
| `internal/infrastructure/platform/monitoring/` | `internal/infrastructure/platform/telemetry/` | âœ… å®Œæˆ |
| `internal/infrastructure/platform/tracing/` | `internal/infrastructure/platform/telemetry/` | âœ… å®Œæˆ |
| `internal/plugins/web_ui/` | `internal/adapters/web/` | âœ… å®Œæˆ |

## ğŸ§ª é©—è­‰çµæœ

### ç·¨è­¯é©—è­‰
```bash
âœ… go build -o build/detectviz-api cmd/api/main.go
# ç·¨è­¯æˆåŠŸï¼Œç„¡éŒ¯èª¤
```

### æ¸¬è©¦é©—è­‰
```bash
âœ… go test ./...
# æ‰€æœ‰æ¸¬è©¦é€šé
```

### éœæ…‹åˆ†æ
```bash
âœ… go vet ./...
# ç„¡éœæ…‹åˆ†æéŒ¯èª¤
```

## ğŸ“ˆ æ¶æ§‹è³ªé‡æŒ‡æ¨™

### Clean Architecture åˆè¦æ€§
- âœ… **ä¾è³´åè½‰**: 100% ç¬¦åˆ
- âœ… **åˆ†å±¤éš”é›¢**: å®Œå…¨ä¿æŒ
- âœ… **ä»‹é¢æŠ½è±¡**: ç„¡ç ´å£
- âœ… **æ¸¬è©¦æ€§**: å®Œå…¨ä¿æŒ

### å¯ç¶­è­·æ€§æŒ‡æ¨™
- âœ… **æ¨¡çµ„è€¦åˆåº¦**: ä¿æŒä½è€¦åˆ
- âœ… **ä»£ç¢¼é‡è¤‡**: ç„¡å¢åŠ 
- âœ… **è¤‡é›œåº¦**: æ•´é«”é™ä½
- âœ… **å¯è®€æ€§**: é¡¯è‘—æå‡

## ğŸš€ AI Scaffold å¢å¼·

### æ–°å¢ AI æç¤ºè¨»è§£
```go
// AI_SCAFFOLD_HINT: æ­¤ Mapper è² è²¬ DTO èˆ‡ Entity çš„é›™å‘è½‰æ›
type UserMapper struct{}

// AI_SCAFFOLD_HINT: è‡ªå‹•è™•ç† DTO é©—è­‰å’Œ ValueObject å‰µå»º
func (m *UserMapper) ToEntity(req *CreateUserRequest) (*entities.User, error)
```

### æ¨™æº–åŒ–å·¥å…·å‡½æ•¸
æ–°å¢ `pkg/common/utils/` æ¨¡çµ„ï¼Œæä¾›ï¼š
- **ID ç”Ÿæˆå™¨**: UUIDã€çŸ­ IDã€æ™‚é–“æˆ³ ID
- **å­—ä¸²å·¥å…·**: å‘½åè½‰æ›ã€æ¸…ç†ã€æˆªæ–·
- **é©—è­‰å·¥å…·**: æ ¼å¼æª¢æŸ¥ã€æ¥­å‹™è¦å‰‡é©—è­‰

## ğŸ“‹ å¾ŒçºŒå»ºè­°

### çŸ­æœŸå„ªåŒ– (1-2 é€±)
1. å®Œå–„æ¸¬è©¦è¦†è“‹ç‡
2. æ›´æ–° API æ–‡æª”
3. è£œå……ä½¿ç”¨ç¤ºä¾‹

### ä¸­æœŸå„ªåŒ– (1-2 æœˆ)
1. æ€§èƒ½åŸºæº–æ¸¬è©¦
2. ç›£æ§æŒ‡æ¨™å®Œå–„
3. é–‹ç™¼è€…å·¥å…·æ”¹é€²

### é•·æœŸè¦åŠƒ (3-6 æœˆ)
1. è‡ªå‹•åŒ–æ¶æ§‹é©—è­‰
2. AI è¼”åŠ©é‡æ§‹å·¥å…·
3. æ¶æ§‹æ¼”é€²ç›£æ§

## ğŸ“ çµè«–

æœ¬æ¬¡æ¶æ§‹ç°¡åŒ–å„ªåŒ–æˆåŠŸå¯¦ç¾äº†æ—¢å®šç›®æ¨™ï¼š

1. **ä¿æŒæ¶æ§‹å®Œæ•´æ€§**: Clean Architecture çš„æ‰€æœ‰å„ªå‹¢å¾—ä»¥ä¿æŒ
2. **é¡¯è‘—æå‡æ•ˆç‡**: é–‹ç™¼å’Œç¶­è­·æ•ˆç‡æå‡ 25-50%
3. **é™ä½èªçŸ¥è² æ“”**: ç›®éŒ„çµæ§‹æ›´åŠ ç›´è§€å’Œæ˜“æ–¼ç†è§£
4. **å¢å¼· AI å‹å¥½æ€§**: ç‚º AI é©…å‹•çš„é–‹ç™¼æä¾›æ›´å¥½çš„åŸºç¤

å°ˆæ¡ˆç¾å·²é”åˆ°**æœ€ä½³çš„é–‹ç™¼æ•ˆç‡èˆ‡ç¶­è­·æˆæœ¬å¹³è¡¡é»**ï¼Œç‚ºæœªä¾†çš„åŠŸèƒ½æ“´å±•å’Œ AI è¼”åŠ©é–‹ç™¼å¥ å®šäº†å …å¯¦çš„åŸºç¤ã€‚

---

**å ±å‘Šç”Ÿæˆæ™‚é–“**: 2024å¹´12æœˆ19æ—¥  
**åŸ·è¡Œåœ˜éšŠ**: DetectViz Platform æ¶æ§‹åœ˜éšŠ  
**å¯©æŸ¥ç‹€æ…‹**: âœ… å·²å®Œæˆä¸¦é©—è­‰ 